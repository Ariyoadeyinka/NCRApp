<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Create NCR</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <header class="sticky-top bg-body">
        <nav class="navbar navbar-expand-md bg-body px-2">
            <div class="container-xxl">
                <a class="navbar-brand d-flex align-items-center gap-2" href="/">
                    <img src="images/logo.png" alt="Crossfire Logo" style="height:50px">
                    <span class="brand-divider">|</span>
                    <span class="text-body-secondary small" id="pageTitle">Dashboard</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-end" id="mainNav">
                    <ul class="navbar-nav align-items-md-center gap-2">
                        <li class="nav-item">
                            <a class="btn btn-sm btn-outline-secondary nav-btn d-flex align-items-center gap-2 "
                                href="index.html">
                                <i class="fa-solid fa-house"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="btn btn-sm btn-outline-secondary nav-btn d-flex align-items-center gap-2 "
                                href="view-ncr.html">
                                <i class="fa-regular fa-file-lines"></i> View NCRs
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="btn btn-sm btn-outline-secondary nav-btn d-flex align-items-center gap-2 active"
                                href="#">
                                <i class="fa-solid fa-plus"></i> Create NCR
                            </a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link btn btn-sm btn-outline-secondary dropdown-toggle d-flex align-items-center gap-2"
                                href="#" id="accountMenu" data-bs-toggle="dropdown">
                                <i class="bi bi-person-circle"></i> Account
                            </a>
                            <ul class="dropdown-menu shadow border-0" aria-labelledby="accountMenu">
                                <li><a class="dropdown-item" href="#profile">Profile</a></li>
                                <li><a class="dropdown-item" href="#settings">Settings</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="#logout">Sign out</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main class="py-3 create-ncr-main">
        <div class="container-xxl small text-muted mb-2">
            <i class="bi bi-house-door me-1"></i>
            <a href="index.html" class="text-muted text-decoration-none">Dashboard</a>
            <span class="mx-2">›</span><a href="view-ncr.html" class="text-muted text-decoration-none">NCR List</a>
            <span class="mx-2">›</span><strong class="text-dark">Create New NCR</strong>
        </div>

        <div class="cf-stepper container-xxl my-2">
            <div class="cf-stepper-item">
                <span class="cf-step-icon"><i class="fa-regular fa-file-lines"></i></span>
                <span class="cf-stepper-label">NCR Details</span>
            </div>
            <div class="cf-stepper-line"></div>
            <div class="cf-stepper-item">
                <span class="cf-step-icon"><i class="fa-regular fa-clipboard"></i></span>
                <span class="cf-stepper-label">Quality Details</span>
            </div>
            <div class="cf-stepper-line"></div>
            <div class="cf-stepper-item">
                <span class="cf-step-icon"><i class="fa-regular fa-eye"></i></span>
                <span class="cf-stepper-label">Review &amp; Submit</span>
            </div>
        </div>

        <section id="step1" class="container-xxl cf-view">
            <div class="card border-0 shadow-sm cf-card">
                <div class="card-body">
                    <div class="cf-head cf-head-ncr">
                        <h6 class="fw-semibold mb-1"><i class="fa-regular fa-file-lines me-2"></i>NCR Details</h6>
                        <p class="text-muted small mb-4">Enter basic NCR information</p>
                    </div>
                    <form class="cf-form">
                        <fieldset class="cf-block cf-block-ncr">
                            <div class="row g-3">
                                <div class="col-12">
                                    <label class="form-label d-flex align-items-center gap-2">NCR No
                                        <span class="cf-tip"
                                            data-tip="Auto-generated unique identifier; cannot be changed.">?</span>
                                    </label>
                                    <input class="form-control form-control-lg disabled-form" name="ncrNo" value=""
                                        readonly>
                                </div>
                                <div class="col-12 cf-supplier-field">
                                    <label class="form-label d-flex align-items-center gap-2">Supplier Name
                                        <span class="cf-tip"
                                            data-tip="Pick an existing supplier or choose ‘+ Add New Supplier’.">?</span>
                                    </label>
                                    <select id="supplier" name="supplier"
                                        class="form-select form-select-lg bg-body-tertiary" required>
                                        <option value="" selected>Select supplier or add new</option>
                                        <option value="add_new">+ Add New Supplier</option>
                                    </select>
                                    <div class="cf-add-new mt-2" style="display:none">
                                        <div class="input-group input-group-lg">
                                            <span class="input-group-text"><i class="fa-solid fa-industry"></i></span>
                                            <input type="text" class="form-control bg-body-tertiary"
                                                placeholder="Enter new supplier name" aria-label="New supplier name"
                                                id="newSupplierName">
                                            <button type="button" class="btn btn-primary"
                                                id="addSupplierBtn">Add</button>
                                            <button type="button" class="btn btn-outline-secondary"
                                                id="cancelAddSupplierBtn">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <label class="form-label d-flex align-items-center gap-2">Product No
                                        <span class="cf-tip" data-tip="Part number from PO/label/drawing.">?</span>
                                    </label>
                                    <input class="form-control form-control-lg bg-body-tertiary" name="productNo"
                                        placeholder="Enter product number" required>
                                </div>
                                <div class="col-12">
                                    <label class="form-label d-flex align-items-center gap-2">Sales Order No
                                        <span class="cf-tip"
                                            data-tip="Related sales order number (if applicable).">?</span>
                                    </label>
                                    <input class="form-control form-control-lg bg-body-tertiary" name="soNo"
                                        placeholder="Enter sales order number" required>
                                </div>
                                <div class="col-12">
                                    <label class="form-label d-flex align-items-center gap-2">Date Raised
                                        <span class="cf-tip"
                                            data-tip="Date the non-conformance was identified.">?</span>
                                    </label>
                                    <input class="form-control form-control-lg disabled-form" name="dateRaised"
                                        value="2025-10-03" readonly>
                                </div>
                                <div class="col-12">
                                    <label class="form-label d-flex align-items-center gap-2">Closed Date
                                        <span class="cf-tip" data-tip="Leave as N/A until the NCR is closed.">?</span>
                                    </label>
                                    <input class="form-control form-control-lg disabled-form" name="dateClosed"
                                        value="N/A" readonly>
                                </div>
                            </div>
                        </fieldset>
                        <div class="cf-actions cf-actions-ncr d-flex justify-content-between mt-4">
                            <button type="button" class="btn btn-save">Save</button>
                            <a href="#step2" class="btn btn-primary" id="toStep2">Next <i
                                    class="fa-solid fa-arrow-right-long ms-1"></i></a>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <section id="step2" class="container-xxl cf-view">
            <div class="card border-0 shadow-sm cf-card">
                <div class="card-body">
                    <div class="cf-head cf-head-quality">
                        <h6 class="fw-semibold mb-1"><i class="fa-regular fa-clipboard me-2"></i>Quality Details</h6>
                        <p class="text-muted small mb-4">Enter quality-related information</p>
                    </div>
                    <form class="cf-form">
                        <fieldset class="cf-block cf-block-quality">
                            <div class="row g-3">
                                <div class="col-12 col-md-6 col-lg-3">
                                    <label class="form-label d-flex align-items-center gap-2">WIP PRO
                                        <span class="cf-tip" data-tip="Is this item part of Work-In-Process?">?</span>
                                    </label>
                                    <div class="btn-group w-100" role="group" aria-label="WIP">
                                        <input type="radio" class="btn-check" name="wip" id="wipYes" value="Yes">
                                        <label class="btn btn-outline-secondary" for="wipYes">Yes</label>
                                        <input type="radio" class="btn-check" name="wip" id="wipNo" value="No" checked>
                                        <label class="btn btn-outline-secondary" for="wipNo">No</label>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 col-lg-3">
                                    <label class="form-label d-flex align-items-center gap-2">Item Marked as
                                        Non-Conforming
                                        <span class="cf-tip"
                                            data-tip="Enable if the item is officially flagged as non-conforming.">?</span>
                                    </label>
                                    <div class="btn-group w-100" role="group" aria-label="Non-Conforming">
                                        <input type="radio" class="btn-check" name="isNC" id="ncYes" value="Yes">
                                        <label class="btn btn-outline-secondary" for="ncYes">Yes</label>
                                        <input type="radio" class="btn-check" name="isNC" id="ncNo" value="No" checked>
                                        <label class="btn btn-outline-secondary" for="ncNo">No</label>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 col-lg-3">
                                    <label class="form-label d-flex align-items-center gap-2">Quantity Supplied
                                        <span class="cf-tip" data-tip="Total quantity received for this item.">?</span>
                                    </label>
                                    <input type="number" min="0" class="form-control bg-body-tertiary"
                                        name="qtySupplied" placeholder="Total quantity supplied" required>
                                </div>
                                <div class="col-12 col-md-6 col-lg-3">
                                    <label class="form-label d-flex align-items-center gap-2">Quantity Defective
                                        <span class="cf-tip" data-tip="How many pieces are non-conforming.">?</span>
                                    </label>
                                    <input type="number" min="0" class="form-control bg-body-tertiary"
                                        name="qtyDefective" placeholder="Quantity found defective" required>
                                </div>
                                <div class="col-12">
                                    <label class="form-label d-flex align-items-center gap-2">
                                        Defect Description <span class="text-danger">*</span>
                                        <span class="cf-tip"
                                            data-tip="Explain what’s wrong (dimension, finish, wrong part, etc.).">?</span>
                                    </label>
                                    <textarea class="form-control bg-body-tertiary defectDesc" name="defectDesc"
                                        placeholder="Detailed description of the defect" required></textarea>
                                </div>
                                <div class="col-12">
                                    <label class="form-label d-flex align-items-center gap-2">
                                        Quality Rep Name <span class="text-danger">*</span>
                                        <span class="cf-tip"
                                            data-tip="Inspector’s full name responsible for this NCR.">?</span>
                                    </label>
                                    <input class="form-control bg-body-tertiary" name="repName"
                                        placeholder="Enter quality representative name" required>
                                </div>
                            </div>
                        </fieldset>
                        <div
                            class="cf-actions cf-actions-quality d-flex flex-column flex-md-row align-items-stretch align-items-md-center gap-2 mt-4">
                            <div class="d-flex gap-2 flex-wrap order-1">
                                <a href="#step1" class="btn btn-outline-secondary" id="backToStep1">
                                    <i class="fa-solid fa-arrow-left-long me-1"></i> Back
                                </a>
                                <button type="button" class="btn btn-save">Save</button>
                                <a href="index.html" class="btn btn-light">Cancel</a>
                            </div>
                            <div class="d-flex order-2 ms-md-auto">
                                <a href="#step3" class="btn btn-primary cf-wide w-100 w-md-auto" id="toStep3">
                                    Review &amp; Confirm <i class="fa-solid fa-arrow-right-long ms-1"></i>
                                </a>
                            </div>
                        </div>

                    </form>
                </div>
            </div>
        </section>

        <section id="step3" class="container-xxl cf-view">
            <div class="card border-0 shadow-sm cf-card">
                <div class="card-body">
                    <div class="cf-head cf-head-review">
                        <h6 class="fw-semibold mb-1"><i class="fa-regular fa-eye me-2"></i>Review &amp; Confirm</h6>
                        <p class="text-muted small mb-4">Please review all information before submitting</p>
                    </div>
                    <form class="cf-form">
                        <fieldset class="cf-block cf-block-ncr">
                            <legend class="cf-legend"><i class="fa-regular fa-file-lines"></i> NCR Details</legend>
                            <div class="row g-3">
                                <div class="col-12">
                                    <label class="form-label">NCR No</label>
                                    <input class="form-control form-control-lg bg-body-tertiary" id="reviewNcrNo"
                                        readonly>
                                </div>
                                <div class="col-12">
                                    <label class="form-label">Supplier Name</label>
                                    <input class="form-control form-control-lg bg-body-tertiary" id="reviewSupplier"
                                        readonly>
                                </div>
                                <div class="col-12">
                                    <label class="form-label">Product No</label>
                                    <input class="form-control form-control-lg bg-body-tertiary" id="reviewProductNo"
                                        readonly>
                                </div>
                                <div class="col-12">
                                    <label class="form-label">Sales Order No</label>
                                    <input class="form-control form-control-lg bg-body-tertiary" id="reviewSoNo"
                                        readonly>
                                </div>
                                <div class="col-12">
                                    <label class="form-label">Date Raised</label>
                                    <input class="form-control form-control-lg bg-body-tertiary" id="reviewDateRaised"
                                        readonly>
                                </div>
                                <div class="col-12">
                                    <label class="form-label">Closed Date</label>
                                    <input class="form-control form-control-lg bg-body-tertiary" id="reviewDateClosed"
                                        readonly>
                                </div>
                            </div>
                        </fieldset>
                        <fieldset class="cf-block cf-block-quality">
                            <legend class="cf-legend"><i class="fa-regular fa-clipboard"></i> Quality Details</legend>
                            <div class="row g-3">
                                <div class="col-12">
                                    <label class="form-label">WIP PRO</label>
                                    <input class="form-control bg-body-tertiary" id="reviewWip" readonly>
                                </div>
                                <div class="col-12">
                                    <label class="form-label">Item Marked as Non-Conforming</label>
                                    <input class="form-control bg-body-tertiary" id="reviewIsNc" readonly>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Quantity Supplied</label>
                                    <input type="number" min="0" class="form-control bg-body-tertiary"
                                        id="reviewQtySupplied" readonly>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Quantity Defective</label>
                                    <input type="number" min="0" class="form-control bg-body-tertiary"
                                        id="reviewQtyDefective" readonly>
                                </div>
                                <div class="col-12">
                                    <label class="form-label">Defect Description</label>
                                    <input class="form-control bg-body-tertiary" id="reviewDefectDesc" readonly>
                                </div>
                                <div class="col-12">
                                    <label class="form-label">Quality Rep Name</label>
                                    <input class="form-control bg-body-tertiary" id="reviewRepName" readonly>
                                </div>
                            </div>
                        </fieldset>

                        <div
                            class="cf-actions cf-actions-quality d-flex flex-column flex-md-row align-items-stretch align-items-md-center gap-2 mt-4">
                            <div class="d-flex gap-2 flex-wrap order-1">
                                <a href="#step2" class="btn btn-outline-secondary" id="backToStep1">
                                    <i class="fa-solid fa-arrow-left-long me-1"></i> Back
                                </a>
                                <button type="button" class="btn btn-save">Save</button>
                                <a href="index.html" class="btn btn-light">Cancel</a>
                            </div>
                            <div class="d-flex order-2 ms-md-auto">
                                <a href="#" class="btn btn-primary cf-wide w-100 w-md-auto" id="submitNcr">
                                    <i class="fa-regular fa-paper-plane me-1"></i> Complete NCR
                                </a>
                            </div>
                        </div>

                </div>
                </form>
            </div>
            </div>
        </section>
    </main>

    <footer class="app-footer">
        <div class="footer-left">
            <img src="images/logo.png" alt="Crossfire Logo" style="height:50px">
            NCR Management System – Built with accessibility in mind
        </div>
        <div class="footer-right">
            Keyboard shortcuts: <span class="shortcut">Alt+H</span> (Home),
            <span class="shortcut">Alt+L</span> (List),
            <span class="shortcut">Alt+N</span> (New)
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/script.js"></script>
    <script src="js/ncr-utils.js"></script>
    <script src="js/supplier.js"></script>
    <script src="js/create-ncr.js"></script>
</body>

</html>